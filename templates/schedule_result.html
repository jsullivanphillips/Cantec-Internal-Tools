<!DOCTYPE html>
<html>
<head>
  <title>Schedule Results</title>
  <style>
    body {
      font-family: 'Calibri', sans-serif;
    }
  </style>
</head>
<body>
  <h1>Available Schedule Dates</h1>
  {% if error %}
    <p style="color: red;">{{ error }}</p>
  {% else %}
    {% if candidate_results %}
      <p>First {{ candidate_results|length }} available dates meeting the criteria:</p>
      {% set categories = {
          'Senior Techs': ['Adam Bendorffe', 'Craig Shepherd', 'Jonathan Graves', 'James Martyn'],
          'Mid level Techs': ['Alex Turko', 'Austin Rasmussen', 'Kyler Dickey', 'Crosby Stewart', 'Eric Turko'],
          'Junior Techs': ['Jonathan Palahicky', 'Mariah Grier', 'Seth Ealing'],
          'Trainee Techs': ['William Daniel', 'Kevin Gao', 'Hannah Feness', 'James McNeil'],
          'Sprinkler Techs': ['Justin Walker', 'Colin Peterson']
      } %}
      <ul>
        {% for result in candidate_results %}
          <li>
            <h4>{{ result[0].strftime("%B") }} {{ result[0].day }}, {{ result[0].year }}</h4>
            <ul>
              {% for cat, tech_list in categories.items() %}
                {% set ns = namespace(techs_in_cat=[]) %}
                {% for tech in tech_list %}
                  {% if tech in result[1] %}
                    {% set ns.techs_in_cat = ns.techs_in_cat + [{'name': tech, 'hours': result[1][tech]}] %}
                  {% endif %}
                {% endfor %}
                {% if ns.techs_in_cat|length > 0 %}
                  <li>
                    <strong>{{ cat }}:</strong>
                    <ul>
                      {% for item in ns.techs_in_cat %}
                        <li>{{ item.name }}: {{ item.hours }} hours available</li>
                      {% endfor %}
                    </ul>
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No available dates found that meet the criteria.</p>
    {% endif %}
  {% endif %}
  <br>
  <a href="{{ url_for('find_schedule') }}">Back</a>
</body>
</html>
